/*
 Hype Video Controller v1.0.4
 Copyright (2024) Max Ziebell. MIT-license
*/
'use strict';!1==="HypeVideoController"in window&&(window.HypeVideoController=function(){function m(b){b.querySelectorAll("video").forEach(c=>{c.pause();c.currentTime=0})}function n(b){if(g.autoObserver){var c=document.getElementById(b.documentId()),e=new MutationObserver(d=>{d.forEach(f=>{"attributes"===f.type&&"style"===f.attributeName&&f.target.classList.contains("HYPE_scene")&&(f=f.target,"none"===window.getComputedStyle(f).display&&(m(f),g.removeSources&&f.querySelectorAll("video").forEach(p=>
{p.querySelectorAll("source").forEach(q=>{q.remove()})})))})});c=c.getElementsByClassName("HYPE_scene");var a={attributes:!0,attributeFilter:["style"]};Array.from(c).forEach(d=>{e.observe(d,a)});r.set(b,e)}}function h(b,c,e){var a=(a=e.closest(".HYPE_scene"))?"none"!==window.getComputedStyle(a).display:!1;a&&(b.triggerCustomBehaviorNamed(c),(e=e.getAttribute("data-video-name"))&&b.triggerCustomBehaviorNamed(`${c} ${e}`))}function t(b){b.getElementById(b.currentSceneId()).querySelectorAll("video").forEach(c=>
{l.has(c)||(c.addEventListener("ended",()=>{h(b,"Video Ended",c)}),c.addEventListener("play",()=>{h(b,"Video Started",c)}),c.addEventListener("pause",()=>{h(b,"Video Paused",c)}),l.add(c))})}function k(b,c){const e=`data-video-${c.toLowerCase()}`;b=b.getAttribute(e);return null!==b?"true"===b:g[c]}function u(b){b.getElementById(b.currentSceneId()).querySelectorAll("video").forEach(c=>{requestAnimationFrame(()=>{k(c,"autoMute")&&(c.muted=!0);k(c,"autoInline")&&(c.playsInline=!0);k(c,"autoStart")&&
(c.currentTime=0,c.play().catch(e=>{console.warn(`Failed to autoplay video: ${c.id||"unnamed"}`,e)}))})})}function v(b,c){b.getElementById(b.currentSceneId()).querySelectorAll("video").forEach(e=>{e.pause();c&&(e.currentTime=0)})}const l=new WeakSet,r=new WeakMap,g={autoStart:!0,autoMute:!0,autoInline:!0,removeSources:!0,autoObserver:!0};!1==="HYPE_eventListeners"in window&&(window.HYPE_eventListeners=[]);window.HYPE_eventListeners.push({type:"HypeDocumentLoad",callback:function(b,c,e){n(b);b.getVideo=
function(a){const d=this.getElementById(this.currentSceneId());return a?a.match(/^[.#\[]/)||a.includes(" ")?d.querySelector(a):d.querySelector(`video[data-video-name="${a}"]`):d.querySelector("video")};b.isVideoPlaying=function(a){return(a=this.getVideo(a))?!a.paused&&!a.ended:!1};b.playVideo=function(a){const d=this.getVideo(a);d&&d.play().catch(f=>{console.warn(`Failed to play video "${a}":`,f)})};b.pauseVideo=function(a){(a=this.getVideo(a))&&a.pause()};b.stopVideo=function(a){if(a=this.getVideo(a))a.pause(),
a.currentTime=0};b.setVideoVolume=function(a,d){(a=this.getVideo(a))&&0<=d&&1>=d&&(a.volume=d)};b.seekVideoTo=function(a,d){(a=this.getVideo(a))&&0<=d&&d<=a.duration&&(a.currentTime=d)};b.toggleVideoMute=function(a){if(a=this.getVideo(a))a.muted=!a.muted};b.getVideoDuration=function(a){return(a=this.getVideo(a))?a.duration:null};b.seekVideoToPercentage=function(a,d){return(a=this.getVideo(a))&&0<=d&&100>=d?(d=d/100*a.duration,a.currentTime=d):null}}});window.HYPE_eventListeners.push({type:"HypeScenePrepareForDisplay",
callback:function(b,c,e){t(b);u(b)}});window.HYPE_eventListeners.push({type:"HypeSceneUnload",callback:function(b,c,e){v(b)}});return{version:"1.0.4",setDefault:function(b,c){"object"===typeof b?Object.assign(g,b):g[b]=c},getDefault:function(b){return b?g[b]:{...g}}}}());
 
